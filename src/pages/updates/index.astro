---
import Layout from '../../layouts/BaseLayout.astro';
const modules = import.meta.glob('./*.md', { eager: true });
const posts = Object.entries(modules).map(([path, mod]) => {
  const slug = path.replace('./','').replace(/\.md$/,'');
  return { ...mod.frontmatter, slug, url: `/updates/${slug}` };
}).sort((a,b) => new Date(b.date) - new Date(a.date));
---
<Layout title="Updates">
  <div style="padding:1rem 0">
    <h1>Updates</h1>
    <div class="post-list">
      {posts.map(post => (
        <article class="post-card">
          <a href={post.url}>{post.title}</a>
          <div class="post-date">{post.date}</div>
          <p style="color:var(--muted);margin-top:0.6rem">{post.description ?? ''}</p>
        </article>
      ))}
    </div>
  </div>
</Layout>
